<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.52" />
  <meta name="author" content="Mathieu Besançon">
  <meta name="description" content="PhD student in applied mathematics for energy systems">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  

  <link rel="alternate" href="https://matbesancon.github.io/index.xml" type="application/rss+xml" title="μβ">
  <link rel="feed" href="https://matbesancon.github.io/index.xml" type="application/rss+xml" title="μβ">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://matbesancon.github.io/post/2019-04-07-name_distances/">

  

  <title>Picking different names with integer optimization | μβ</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">μβ</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#talks">
            
            <span>Talks</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#experiences">
            
            <span>Experiences</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Picking different names with integer optimization</h1>
    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2019-04-07 00:00:00 &#43;0200 CEST" itemprop="datePublished">
      Sun, Apr 7, 2019
    </time>
  </span>

  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/julia">julia</a
    >, 
    
    <a href="/tags/optimization">optimization</a
    >, 
    
    <a href="/tags/jump">jump</a
    >, 
    
    <a href="/tags/graph">graph</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmatbesancon.github.io%2fpost%2f2019-04-07-name_distances%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Picking%20different%20names%20with%20integer%20optimization&amp;url=https%3a%2f%2fmatbesancon.github.io%2fpost%2f2019-04-07-name_distances%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmatbesancon.github.io%2fpost%2f2019-04-07-name_distances%2f&amp;title=Picking%20different%20names%20with%20integer%20optimization"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fmatbesancon.github.io%2fpost%2f2019-04-07-name_distances%2f&amp;title=Picking%20different%20names%20with%20integer%20optimization"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Picking%20different%20names%20with%20integer%20optimization&amp;body=https%3a%2f%2fmatbesancon.github.io%2fpost%2f2019-04-07-name_distances%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      

<hr />

<p>I must admit I am not always the most talented at social events.
One point I am especially bad at is <strong>remembering names</strong>, and it gets
even harder when lots of people have similar or similar-sounding names.
What if we could select a list of people with names as different from each
other as possible?</p>

<p>First some definitions, <em>different</em> here is meant with respect to the
<a href="https://en.wikipedia.org/wiki/Hamming_distance" target="_blank">Hamming distance</a> of any two names.
This is far from ideal since Ekaterina would be quite far from Katerina, but
it will do the trick for now.</p>

<h2 id="graph-based-mental-model">Graph-based mental model</h2>

<p>This sounds like a problem representable as a complete graph.
The names are the vertices, and the weight associated with each edge $(i,j)$
is the distance between the names of the nodes. We want to take a subset
of $k$ nodes, such that the sum of edge weights for the induced sub-graph
is maximum. This is therefore a particular case of maximum (edge) weight clique
problem over a complete graph, which has been investigated in [1, 2] among others.</p>

<h2 id="a-mathematical-optimization-approach">A mathematical optimization approach</h2>

<p>This model can be expressed in a pretty compact way:</p>

<p>$$ \max_{x,y} \sum_{(i,j)\in E} c_{ij} \cdot y_{ij} $$
subject to: $$ 2y_{ij} \leq x_i + x_j \,\, \forall (i,j) \in E$$
$$ \sum_{i} x_i \leq k $$
$$x_i, y_{ij} \in \mathbb{B} $$</p>

<p>The graph is complete and undirected, so the set of edges is:<br />
$ E = $ {$ (i,j) | i \in $ {$ 1..|V| $}$, j \in ${$ 1..i-1 $}}</p>

<p>It&rsquo;s an integer problem with a quadratic number of variables and constraints.
Some other formulations have been proposed, and there may be a specific structure
to exploit given that we have a complete graph.
For the moment though, this generic formulation will do.</p>

<h2 id="a-julia-implementation">A Julia implementation</h2>

<p>What we want is a function taking a collection of names and returning which
are selected. The first thing to do is build this distance matrix.
We will be using the
<a href="https://github.com/matthieugomez/StringDistances.jl" target="_blank">StringDistances.jl</a>
package not to have to re-implement the Hamming distance.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#66d9ef">import</span> StringDistances

hamming(s1, s2) <span style="color:#f92672">=</span> StringDistances<span style="color:#f92672">.</span>evaluate(StringDistances<span style="color:#f92672">.</span>Hamming(), s1, s2)

<span style="color:#66d9ef">function</span> build_dist(vstr, dist <span style="color:#f92672">=</span> hamming)
    <span style="color:#66d9ef">return</span> [dist(vstr[i], vstr[j]) <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> eachindex(vstr), j <span style="color:#66d9ef">in</span> eachindex(vstr)]
<span style="color:#66d9ef">end</span></code></pre></div>

<p>We keep the option to change the distance function with something else later.
The optimization model can now be built, using the distance function and $k$,
the maximum number of nodes to take.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#66d9ef">using</span> JuMP
<span style="color:#66d9ef">import</span> SCIP

<span style="color:#66d9ef">function</span> max_clique(dist, k)
    m <span style="color:#f92672">=</span> Model(with_optimizer(SCIP<span style="color:#f92672">.</span>Optimizer))
    n <span style="color:#f92672">=</span> size(dist)[<span style="color:#ae81ff">1</span>]
    <span style="color:#a6e22e">@variable</span>(m, x[<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n], Bin)
    <span style="color:#a6e22e">@variable</span>(m, y[i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n,j<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], Bin)
    <span style="color:#a6e22e">@constraint</span>(m, sum(x) <span style="color:#f92672">&lt;=</span> k)
    <span style="color:#a6e22e">@constraint</span>(m, [i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n,j<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], <span style="color:#ae81ff">2</span>y[i,j] <span style="color:#f92672">&lt;=</span> x[i] <span style="color:#f92672">+</span> x[j])
    <span style="color:#a6e22e">@objective</span>(m, Max, sum(y[i,j] <span style="color:#f92672">*</span> dist[i,j] <span style="color:#66d9ef">for</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n,j<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>))
    <span style="color:#66d9ef">return</span> (m, x, y)
<span style="color:#66d9ef">end</span></code></pre></div>

<p>I&rsquo;m using SCIP as an integer solver to avoid proprietary software,
feel free to switch it for your favourite one.
Note that we don&rsquo;t optimize the model yet but simply build it.
It is a useful pattern when working with JuMP, allowing users
to inspect the build model or add constraints to it before starting the resolution.
The last steps are straightforward:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia">dist <span style="color:#f92672">=</span> build_dist(vstr)
(m, x, y) <span style="color:#f92672">=</span> max_clique(dist, k)
optimize!(m) <span style="color:#75715e"># solve the problem</span>

<span style="color:#75715e"># get the subset of interest</span>
diverse_names <span style="color:#f92672">=</span> [vstr[i] <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> eachindex(vstr) <span style="color:#66d9ef">if</span> JuMP<span style="color:#f92672">.</span>value(x[i]) ≈ <span style="color:#ae81ff">1.</span>]</code></pre></div>

<p>And voilà.</p>

<h2 id="trying-out-the-model">Trying out the model</h2>

<p>I will use 50 real names taken from
<a href="http://listofrandomnames.com" target="_blank">the list of random names</a> website, which you
can find <a href="/text/names.txt">here</a>.
The problem becomes large enough to be interesting, but reasonable enough for
a decent laptop. If you want to invite 4 of these people and get the most
different names, Christian, Elizbeth, Beulah and Wilhelmina are the ones you
are looking for.</p>

<h2 id="bonus-and-random-ideas">Bonus and random ideas</h2>

<p>It is computationally too demanding for now, but it would be interesting
to see how the total sum of distances evolves as you add more people.</p>

<p>Also, we are using the sum of distances as an objective to maximize.
One interesting alternative would be to maximize the smallest distance between
any two nodes in the subset. This changes the model, since we need to encode
the smallest distance using constraints. We will use an indicator constraint
to represent this:</p>

<p>$$\max_{x,y} d $$
subject to:
$$ y_{ij} \Rightarrow d \leq c_{ij} \,\, \forall (i,j) \in E$$
$$ 2y_{ij} \leq x_i + x_j \forall (i,j) \in E $$
$$ \sum_{(i,j) \in E} y_{ij} = k\cdot (k-1) $$</p>

<p>Depending on the solver support, the indicator constraint can be modelled directly,
with big M or SOS1 constraints. This remains harder than the initial model.</p>

<p>Special thanks to Yuan for bringing out the discussion which led to this
post, and to BYP for the feedback.</p>

<hr />

<h1 id="sources">Sources</h1>

<p>[1] Alidaee, Bahram, et al. &ldquo;Solving the maximum edge weight clique problem via unconstrained quadratic  programming.&rdquo; European Journal of Operational Research 181.2 (2007): 592-597.</p>

<p>[2] Park, Kyungchul, Kyungsik Lee, and Sungsoo Park. &ldquo;An extended formulation approach to the edge-weighted maximal clique problem.&rdquo; European Journal of Operational Research 95.3 (1996): 671-682.</p>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://matbesancon.github.io/post/2019-03-30-static-list/"><span
      aria-hidden="true">&larr;</span> Static lists in Julia</a></li>
    

    
  </ul>
</nav>

</div>

<div class="article-container">
  

</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Mathieu Besançon &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js" integrity="sha512-iHzEu7GbSc705hE2skyH6/AlTpOfBmkx7nUqTLGzPYR+C1tRaItbRlJ7hT/D3YQ9SV0fqLKzp4XY9wKulTBGTw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js" integrity="sha512-Z5heTz36xTemt1TbtbfXtTq5lMfYnOkXM2/eWcTTiLU01+Sw4ku1i7vScDc8fWhrP2abz9GQzgKH5NGBLoYlAw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/plugins/ScrollToPlugin.min.js" integrity="sha512-CDeU7pRtkPX6XJtF/gcFWlEwyaX7mcAp5sO3VIu/ylsdR74wEw4wmBpD5yYTrmMAiAboi9thyBUr1vXRPA7t0Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

